(window.webpackJsonp=window.webpackJsonp||[]).push([[33,7,12],{370:function(t,e,n){"use strict";n.r(e);var r=n(135),o=n.n(r),c={props:{type:{type:String,default:"primary"},disabled:{type:Boolean,default:!1}},computed:{computedStyle:function(){return{background:o.a[this.type].background,color:o.a[this.type].color}}},mounted:function(){this.button=this.$refs.button}},l=n(30),component=Object(l.a)(c,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"position:relative"},[e("button",{ref:"button",staticClass:"b:0 p:8|16 w:100% border-radius:4 cursor:pointer transform:translateY(-2):hover transition:0.2s",style:t.computedStyle,on:{click:function(e){return e.preventDefault(),t.$emit("click")}}},[t._t("default")],2),t._v(" "),t.disabled?e("div",{staticClass:"position:absolute top:0 left:0 w:100% h:100% background:rgba(0,0,0,0.4)"}):t._e()])}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(370).default})},389:function(t,e,n){"use strict";n.r(e);var r={},o=n(30),component=Object(o.a)(r,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"flex"},[e("Button",{staticClass:"mr:8",on:{click:function(e){return t.params.editHandler(t.params)}}},[t._v(t._s(t.$t("common.actions.edit")))]),t._v(" "),e("Button",{attrs:{type:"negative"},on:{click:function(e){return t.params.deleteHandler(t.params)}}},[t._v(t._s(t.$t("common.actions.delete")))])],1)}),[],!1,null,null,null);e.default=component.exports;installComponents(component,{Button:n(370).default})},406:function(t,e,n){var content=n(430);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[t.i,content,""]]),content.locals&&(t.exports=content.locals);(0,n(62).default)("e25407d8",content,!0,{sourceMap:!1})},429:function(t,e,n){"use strict";n(406)},430:function(t,e,n){var r=n(61)(!1);r.push([t.i,"table.furstarsRundown{border-collapse:collapse}table.furstarsRundown td{padding:4px 8px;border-bottom:1px solid #000}table.furstarsRundown td:first-child,td:last-child{padding:4px 0}",""]),t.exports=r},490:function(t,e,n){"use strict";n.r(e);var r=n(3),o=(n(50),n(21),n(71)),c=n(72),l=n.n(c),d={layout:"admin",components:{ReaderButtonsCellRenderer:n(389).default},data:function(){return{loading:!1,config:l.a.getConfig(),adminConfig:l.a.getAdminConfig(),rooms:null,activities:null,currentActivities:{}}},mounted:function(){this.getRooms()},methods:{getRooms:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/admin/rooms").then((function(e){t.rooms=e.data.rooms,t.getActivities()})).catch((function(t){o.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},getActivities:function(){var t=this;return Object(r.a)(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t.loading=!0,e.next=3,t.$axios.get("/api/admin/activities").then((function(e){t.activities=e.data.activities,t.currentActivities={},t.rooms.map((function(e){var n=null,r=!0;t.activities.map((function(t){t.room_id==e.room_id&&(n||("FORCEDYES"==t.activity_is_ongoing&&(n=t,r=!1),"YES"==t.activity_is_ongoing&&(n=t,r=!0)))})),t.currentActivities[e.room_id]={auto:r,activity:n}}))})).catch((function(t){o.a.showRequestError(t)}));case 3:t.loading=!1;case 4:case"end":return e.stop()}}),e)})))()},previousActivity:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,e.$axios.post("/api/admin/activities/room/".concat(t,"/previous")).then((function(t){e.getActivities()})).catch((function(t){o.a.showRequestError(t)}));case 3:e.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},nextActivity:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,e.$axios.post("/api/admin/activities/room/".concat(t,"/next")).then((function(t){e.getActivities()})).catch((function(t){o.a.showRequestError(t)}));case 3:e.loading=!1;case 4:case"end":return n.stop()}}),n)})))()},auto:function(t){var e=this;return Object(r.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return e.loading=!0,n.next=3,e.$axios.post("/api/admin/activities/room/".concat(t,"/auto")).then((function(t){e.getActivities()})).catch((function(t){o.a.showRequestError(t)}));case 3:e.loading=!1;case 4:case"end":return n.stop()}}),n)})))()}}},v=(n(429),n(30)),component=Object(v.a)(d,(function(){var t=this,e=t._self._c;return e("div",{staticClass:"p:16 overflow:auto"},[e("Loading",{attrs:{value:t.loading}}),t._v(" "),e("div",{staticClass:"font-size:2rem mb:16"},[t._v("各活動空間狀態")]),t._v(" "),e("table",{staticClass:"furstarsRundown"},[t._m(0),t._v(" "),e("tbody",t._l(t.rooms,(function(n){return e("tr",[e("td",{staticStyle:{"border-top":"1px solid black"}},[t._v("\n          "+t._s(n.room_name)+"\n          "),n.remarks?e("div",[e("small",[t._v(t._s(n.remarks))])]):t._e()]),t._v(" "),e("td",{staticStyle:{"border-top":"1px solid black"}},[t.currentActivities[n.room_id]?e("span",[t.currentActivities[n.room_id].auto?e("span",[t._v("自動")]):e("span",{staticStyle:{"background-color":"red",color:"white"}},[t._v("手動")])]):t._e()]),t._v(" "),e("td",{staticStyle:{"border-top":"1px solid black"}},[t.currentActivities[n.room_id]&&t.currentActivities[n.room_id].activity?e("span",[t.currentActivities[n.room_id].activity.activity_adult_only?e("span",[t._v("[R18]\n            ")]):t._e(),t._v("\n            "+t._s(t.currentActivities[n.room_id].activity.activity_name)+"\n          ")]):e("span",[t._v("-")])]),t._v(" "),e("td",{staticStyle:{"border-top":"1px solid black"}},[t.currentActivities[n.room_id]&&t.currentActivities[n.room_id].activity?e("span",[t.currentActivities[n.room_id].activity.activity_time_start?e("span",[t._v("\n              "+t._s(new Date(1e3*t.currentActivities[n.room_id].activity.activity_time_start).toLocaleString())),e("br"),t._v("\n              ~\n              "+t._s(new Date(1e3*t.currentActivities[n.room_id].activity.activity_time_end).toLocaleString())+"\n            ")]):t._e()]):e("span",[t._v("-")])]),t._v(" "),e("td",{staticStyle:{"border-top":"1px solid black"}},[e("span",{staticClass:"flex"},[e("Button",{attrs:{type:"secondary"},on:{click:function(e){return t.previousActivity(n.room_id)}}},[t._v("上一場")]),t._v(" "),t.currentActivities[n.room_id]&&!t.currentActivities[n.room_id].auto?e("Button",{staticClass:"ml:8",attrs:{type:"secondary"},on:{click:function(e){return t.auto(n.room_id)}}},[t._v("自動")]):t._e(),t._v(" "),e("Button",{staticClass:"ml:8",attrs:{type:"secondary"},on:{click:function(e){return t.nextActivity(n.room_id)}}},[t._v("下一場")])],1)])])})),0)])],1)}),[function(){var t=this,e=t._self._c;return e("thead",[e("tr",[e("th",[t._v("空間名稱")]),t._v(" "),e("th",[t._v("排程模式")]),t._v(" "),e("th",[t._v("活動")]),t._v(" "),e("th",[t._v("表訂時程")]),t._v(" "),e("th",[t._v("換場設定")])])])}],!1,null,null,null);e.default=component.exports;installComponents(component,{Loading:n(169).default,Button:n(370).default})}}]);